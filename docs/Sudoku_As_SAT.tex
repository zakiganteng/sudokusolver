% vim: set fenc=utf-8 ft=latex encoding=utf-8
% -*- mode: latex; coding: UTF-8; -*-

\newif\ifdraft
\drafttrue % Draft mode -- comment this out before submission

\ifdraft
  \documentclass[conference,draftclsnofoot]{IEEEtran}
  \def\baselinestretch{1}
  \setlength{\marginparwidth}{2cm}
\else
  \documentclass[conference,final]{IEEEtran}
\fi

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}


\newcommand{\TheTitle}{Investigating the Effects of Extended Encoding Against
Minimal Encoding}
\newcommand{\TheKeywords}{Sudoku, SAT-solver, minimal encoding, extended encoding}
\newcommand{\TheAuthors}{Evan Wilde, Sebastien Guillemot, Shayla Redlin, Laura
Grondahl}
\newcommand{\TheSubject}{Solving sudoku of varying size and difficulty with a
SAT solver}
\usepackage[hyphens]{url}
\urlstyle{same}
\usepackage[unicode=true,
            bookmarks=false,breaklinks=false,pdfborder={0 0 0},
            backref=none,colorlinks=false]{hyperref}

\hypersetup{pdftitle={\TheTitle},
            pdfauthor={\TheAuthors},
            pdfkeywords={\TheKeywords},
            pdfsubject={\TheSubject},
            urlcolor=blue,citecolor=red}

\usepackage[nospace]{cite}

% Table support
\usepackage{dcolumn}
\usepackage{longtable}
\usepackage{balance}

% Extra suppport
\usepackage{xspace}
\usepackage{caption}

% Fix any bad-hyphenations here
\hyphenation{}

\input{macros.tex}

\begin{document}

\title{\TheTitle}

\author{
\IEEEauthorblockA{\TheAuthors}
\IEEEauthorblockN{Department of Computer Science,
                    University of Victoria,
	    Canada.}}
\maketitle
\begin{abstract}
In this paper we explore solving sudoku as a SAT problem. Using encoding
methods described by Ines Lynce and Joel Ouaknine, we wrote a program to take
an unsolved sudoku puzzle, encode it in standard SAT-challenge (DIMACS) format,
run the SAT solver, and finally convert the results back to a sudoku board.
Lynce and Ouaknine identify a minimal encoding and an extended encoding in
their paper. We implemented both encodings in separate programs. The program is
capable of running on NxN puzzles where N is a perfect square. e.g 9x9, 16x6,
and 25x25 are all usable board sizes. Due to base conversions, our program is
only capable of going up to board sizes of 36x36. The paper presents the
runtime of the minimal encoding versus the extended encoding in the program
``minisat''. We also present the method by which our program was generalized to
handle puzzles of varying sizes, and how varying the size changes the runtime.
\end{abstract}
\begin{IEEEkeywords}
\TheKeywords
\end{IEEEkeywords}

\section{Introduction}
In this paper we explore solving sudoku as a SAT problem. Using encoding
methods described by Ines Lynce and Joel Ouaknine, we wrote a program to take
an unsolved sudoku puzzle, encode it in standard SAT-challenge (DIMACS) format,
run the SAT solver, and finally convert the results back to a sudoku board.
Lynce and Ouaknine identify a minimal encoding and an extended encoding in
their paper. We implemented both encodings in separate programs. The program is
capable of running on NxN puzzles where N is a perfect square. e.g 9x9, 16x6,
and 25x25 are all usable board sizes. Due to base conversions, our program is
only capable of going up to board sizes of 36x36. The paper presents the
runtime of the minimal encoding versus the extended encoding in the program
``minisat''. We also present the method by which our program was generalized to
handle puzzles of varying sizes, and how varying the size changes the runtime.

\section{Data sample}
We found an online board
generator\footnote{\url{http://sudoku-puzzles.merschat.com/}} with difficulties
ranging from ``easy'' to ``Lex Luthor''. Easier puzzles have many blocks
originally filled in, whereas puzzles at ``Lex Luthor'' difficulty only have a
few positions filled in, adding more potentially ambiguous cases. On a 9x9
board, an ``easy'' board may have more than 50\% of the squares filled in,
whereas a ``Lex Luthor'' board may have as few as 4 squares filled in, which
leads to more ambiguous cases and potentially many solutions for a given
puzzle.

\section{Methodologies}
To test the benefits and drawbacks of the presented minimal and extended
encodings, we performed the following test to determine how each scales across
the difficulty of the puzzle and the size of the puzzle. The puzzles we used
for testing purposes are available in the GitHub
repository\footnote{\url{https://github.com/etcwilde/sudokusolver}}.\\

\evan{I don't particularly like how this introduction to the tests is worded}\\
The tests we ran are;
\begin{enumerate}
	\item Minimal encoding on 9x9 puzzles of ``easy'', ``medium'', and
		``Lex Luthor'' difficulty levels.
	\item Minimal encoding on unsolvable 9x9 puzzles of ``easy'',
		``medium'' and ``Lex Luthor'' difficult levels.
	\item Extended encoding on 9x9 puzzles of ``easy'', ``medium'', and
		``Lex Luthor'' difficulty levels.
	\item Extended encoding on unsolvable 9x9 puzzles of ``easy'',
		``medium'' and ``Lex Luthor'' difficult levels.
	\item Minimal encoding on 16x16 puzzles of
		``easy'', ``medium'', and ``Lex Luthor'' difficulty levels.
	\item Extended encoding	on 16x16 puzzles of
		``easy'', ``medium'', and ``Lex Luthor'' difficulty levels.
\end{enumerate}

We sample the results on a 3rd Gen. intel core i5-3337U cpu clocked at 1.80Ghz
with 4Gb of RAM.

\section{Results}
This is where we describe our findings.\evantodo{Come up with a better
description for the section}

\subsection{Test 1: Minimal encoding on 9x9 puzzles of ``easy'', ``medium'',
and ``Lex Luthor'' difficulty levels.}

\begin{table}[!h]
	\centering
	\begin{tabular}{c | l l l}
		Difficulty & Clauses & Variables & Parse time (s) \\\hline
		Easy 		& 1895 & 729 & 0.00 \\
		Medium 		& 1926 & 729 & 0.00 \\
		Lex Luthor 	& 7246 & 729 & 0.00
	\end{tabular}
	\caption{Minimal 9x9 Parse Information}
	\label{tab:summary}
\end{table}

\begin{table}[!h]
	\centering
	\begin{tabular}{c | l l p{20pt} p{20pt} l}
		Difficulty & Memory & Time (s) & Decisions &
		Conflicts & Propagations \\\hline
		Easy 		& 19.00 & 0 		& 1  & 0 & 729\\
		Medium 		& 19.00 & 0 		& 5  & 0 & 729\\
		Lex Luthor 	& 19.00 & 0.003333 	& 95 & 4 & 851
	\end{tabular}
	\caption{Minimal 9x9 Processing Information}

	\label{tab:summary}
	For all difficulties, the number of restarts was 1.
\end{table}

\subsection{Test 2: Minimal encoding on unsolvable 9x9 puzzles of ``easy'',
``medium'' and ``Lex Luthor'' difficult levels.}

\begin{table}[!h]
	\centering
	\begin{tabular}{c | l l l}
		Difficulty & Clauses & Variables & Parse time (s) \\\hline
		Easy 		& 1863 & 729 & 0.00 \\
		Medium 		& 1813 & 729 & 0.00 \\
		Lex Luthor 	& 6864 & 729 & 0.00
	\end{tabular}
	\caption{Unsolvable Minimal 9x9 Parse Information}

	\label{tab:summary}
\end{table}

\begin{table}[!h]
	\centering
	\begin{tabular}{c | l l p{20pt} p{20pt}  l }
		Difficulty & Memory & Time (s) & Decisions &
		Conflicts & Propagations \\\hline
		Easy 		& 19.00 & 0.003333 & 0  & 0  & 646 \\
		Medium 		& 19.00 & 0.003333 & 0  & 0  & 512 \\
		Lex Luthor 	& 19.00 & 0 	   & 86 & 53 & 2518
	\end{tabular}
	\caption{Unsolvable Minimal 9x9 Processing Information}

	\label{tab:summary}
	For all difficulties, the number of restarts was 1.

\end{table}

\subsection{Test 3: Extended encoding on 9x9 puzzles of ``easy'', ``medium'',
and ``Lex Luthor'' difficulty levels.}

\begin{table}[!h]
	\centering
	\begin{tabular}{c | l l l}
		Difficulty & Clauses & Variables & Parse time (s) \\\hline
		Easy 		& 1895 & 729 & 0.00 \\
		Medium 		& 1953 & 729 & 0.00 \\
		Lex Luthor 	& 9217 & 729 & 0.00
	\end{tabular}
	\caption{Extended 9x9 Parse Information}
	\label{tab:summary}
\end{table}

\begin{table}[!h]
	\centering
	\begin{tabular}{c | l l p{20pt} p{20pt} l}
		Difficulty & Memory & Time (s) & Decisions &
		Conflicts & Propagations \\\hline
		Easy 		& 19.00 & 0 	& 1  & 0 & 729\\
		Medium 		& 19.00 & 0 	& 2  & 0 & 729\\
		Lex Luthor 	& 19.00 & 0 	& 64 & 0 & 729
	\end{tabular}
	\caption{Extended 9x9 Processing Information}

	\label{tab:summary}
	For all difficulties, the number of restarts was 1.
\end{table}


\subsection{Test 4: Extended encoding on unsolvable 9x9 puzzles of ``easy'',
``medium'' and ``Lex Luthor'' difficult levels.}

\begin{table}[!h]
	\centering
	\begin{tabular}{c | l l l}
		Difficulty & Clauses & Variables & Parse time (s) \\\hline
		Easy 		& 1863 & 729 & 0.00 \\
		Medium 		& 1813 & 729 & 0.00 \\
		Lex Luthor 	& 8429 & 729 & 0.00
	\end{tabular}
	\caption{Unsolvable Minimal 9x9 Parse Information}

	\label{tab:summary}
\end{table}

\begin{table}[!h]
	\centering
	\begin{tabular}{c | l l p{20pt} p{20pt}  l }
		Difficulty & Memory & Time (s) & Decisions &
		Conflicts & Propagations \\\hline
		Easy 		& 19.00 & 0 & 0  & 0  & 646 \\
		Medium 		& 19.00 & 0.003333 & 0 & 0  & 512 \\
		Lex Luthor 	& 19.00 & 0.003333 & 0 & 0 & 252
	\end{tabular}
	\caption{Unsolvable Minimal 9x9 Processing Information}
	\label{tab:summary}
\end{table} \evan{There were 0 restarts for easy, medium}

\subsection{Test 5: Minimal encoding versus extended encoding on 16x16 puzzles of
``easy'', ``medium'', and ``Lex Luthor'' difficulty levels.}
\begin{table}[!h]
	\centering
	\begin{tabular}{c | l l l}
		Difficulty & Clauses & Variables & Parse time (s) \\\hline
		Easy	& 8716 & 4096 & 0.02\\
		Medium 	& 30977 & 4096 & 0.02\\
		Lex Luthor & 73448 & 4096 & 0.02\\
	\end{tabular}
	\caption{Minimal 16x16 Parse Information}
	\label{tab:summary}
\end{table}

\begin{table}[!h]
	\centering
	\begin{tabular}{c | l l p{20pt} p{20pt}  l }
		Difficulty & Memory & Time (s) & Decisions &
		Conflicts & Propagations \\\hline
		Easy 		& 20.00 & 0.016666 & 0  & 0  & 1367\\
		Medium 		& 20.00 & 0.026666 & 267 & 73 & 15880\\
		Lex Luthor 	& 21.00 & 0.036666 & 2446 & 272 & 27704
	\end{tabular}
	\caption{Minimal 16x16 Processing Information}
	\label{tab:summary} \evan{Easy had 0 restarts, medium had 1 restart,
	lex 3 restarts}
\end{table}

\subsection{Test 6: Extended encoding	on 16x16 puzzles of ``easy'',
``medium'', and ``Lex Luthor'' difficulty levels.}

\begin{table}[!h]
	\centering
	\begin{tabular}{c | l l l}
		Difficulty & Clauses & Variables & Parse time (s) \\\hline
		Easy	& 8761 & 4096 & 0.02\\
		Medium 	& 32205 & 4096 & 0.03\\
		Lex Luthor & & 4096 & \\
	\end{tabular}
	\caption{Extended 16x16 Parse Information}
	\label{tab:summary}
\end{table}

\begin{table}[!h]
	\centering
	\begin{tabular}{c | l l p{20pt} p{20pt}  l }
		Difficulty & Memory & Time (s) & Decisions &
		Conflicts & Propagations \\\hline
		Easy 		& 20.00 & 0.019999 & 0 & 0 & 1367\\
		Medium 		& 20.00 & 0.033333 & 13 & 3 & 4214\\
		Lex Luthor 	& 23.00 & 0.029999 & 444 & 4 & 4371
	\end{tabular}
	\caption{Extended 16x16 Processing Information}
	\label{tab:summary}
\end{table}

\subsection{Limitations}
Theoretically our program can use any $n$x$n$ puzzle, so long a $n$ is a
perfect square; however, due to limitations of encoding numbers larger than z,
our program can only take puzzles up to 36x36. A possible method of extending
the usage of the solver is to allow a delimiter between values in each cell.

\section{Discussion}
From tests 1, 2, 3, 4, and 5 it was found that...  It seems like the minimal
encoding should always be faster; however, the extended encoding is more
efficient for difficult puzzles. \(?\)
Theorectically, our program can take any nxn puzzle as long as n is a perfect
square; however, due to the limitations of encoding numbers larger than 10 in
one character, our program can only take puzzles up to 36x36. One possible way
to encode nxn puzzles with n larger than 36 is to have whitespace between each
entry in the input file and have the program reading the input look for
whitespace to determine individual entries.

\section{Conclusion}
After testing our sudoku solver on a variety of input puzzles, it was found
that...  Our program can solve nxn puzzles up to $n=36$, but n must be a
perfect square.  ...


\end{document}
